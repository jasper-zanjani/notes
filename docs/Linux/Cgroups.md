# Cgroups

**Control groups** or  **cgroups** are a Linux kernel feature that isolates, labels, and manages resources (CPU time, memory, and network bandwidth) for a collection of **tasks** (processes).


Cgroup **subsystems** (also called controllers or resource controllers in documentation) [represent](https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/8/html/managing_monitoring_and_updating_the_kernel/setting-limits-for-applications_managing-monitoring-and-updating-the-kernel#what-kernel-resource-controllers-are_setting-limits-for-applications) a single resource (i.e. **io**, **cpu**, **memory**, **devices**).

- **freezer** suspends or resumes tasks in a cgroup
- **net\_cls** tags network packets with a class identifier that allows the Linux traffic controller to identify packets originating from a particular cgroup task
- **net\_prio** allows network traffic to be prioritized per interface
- **ns** the namespace subsystem

Since cgroups v2, all mounted controllers reside in a single unified hierarchy.
A list of these is generated by the Linux kernel at **/proc/cgroups**.

You can confirm that the **cgroup2** filesystem is mounted at **/sys/fs/cgroup**
```sh
mount -l | grep cgroup -
```

??? info "History"

    "Task Control Groups" were first merged into kernel [2.6.24](https://kernelnewbies.org/Linux_2_6_24) with the ability for multiple hierarchies to be created.
    The logic behind the creation of multiple hierarchies was to enable maximum flexibility in policy creation.
    However, because a controller could only belong to a single hierarchy, after some years this began to be seen as a [design flaw](https://lwn.net/Articles/484251/).
    
    This motivated a redesign into a [single unified cgroup hierarchy](https://lwn.net/Articles/601840/),
    and v2 was merged in [3.16](https://kernelnewbies.org/Linux_3.16) and made stable in [4.5](https://kernelnewbies.org/Linux_4.5).

#### Namespaces

**Namespaces** wrap global system resources (mount points, network devices, hostnames) in an [abstraction](https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/8/html/managing_monitoring_and_updating_the_kernel/setting-limits-for-applications_managing-monitoring-and-updating-the-kernel#what-kernel-resource-controllers-are_setting-limits-for-applications) that makes it appear to processes within that namespace that they have their own isolated instance of that resource.

Process IDs in the same **namespace** can have access to one another, whereas those in different namespaces cannot. 
Spawning a process in a new namespace prevents it from seeing the host's context, so an interactive shell like `zsh` spawned in its own namespace will report its PID as `1`, even though the host will assign its own PID. 



## Commands

--8<-- "includes/Linux/Commands/cgconfig.md"

--8<-- "includes/Linux/Commands/systemd-cgls.md"